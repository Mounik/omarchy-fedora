#!/bin/bash

# Script pour changer de th√®me dans Omarchy Fedora

if [ $# -eq 0 ]; then
    echo "Usage: omarchy-fedora-theme-set <nom-du-theme>"
    echo "Th√®mes disponibles:"
    ls ~/.local/share/omarchy-fedora/themes/
    exit 1
fi

THEME_NAME="$1"
THEME_PATH="$HOME/.config/omarchy/themes/$THEME_NAME"

if [ ! -d "$THEME_PATH" ]; then
    echo "Erreur: Le th√®me '$THEME_NAME' n'existe pas."
    echo "Th√®mes disponibles:"
    ls ~/.local/share/omarchy-fedora/themes/
    exit 1
fi

echo "üé® Changement de th√®me vers: $THEME_NAME"

# Changer le lien symbolique du th√®me actuel
ln -snf "$THEME_PATH" ~/.config/omarchy/current/theme

# Changer le fond d'√©cran
BG_FILE=$(find "$THEME_PATH/backgrounds" -type f -name "*.png" -o -name "*.jpg" | head -n1)
if [ -n "$BG_FILE" ]; then
    ln -snf "$BG_FILE" ~/.config/omarchy/current/background
fi

# Red√©marrer les composants pour appliquer le th√®me
pkill waybar && waybar &
pkill mako && mako &

echo "‚úÖ Th√®me '$THEME_NAME' appliqu√© avec succ√®s!"